var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n;import{A as a,R as l,B as i,g as c,S as s,I as d,h as u,T as g,F as m,C as p,r as f,i as b,D as h,G as E,H as w,E as C,j as v,y,k}from"./vendor.8adc1e17.js";import{u as x,a as S,s as j,C as L}from"./index.ea8da018.js";import{G as R,F as I,L as O}from"./Landing.bfc0d460.js";function W(e){return R({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M13 4.00894C13.0002 3.45665 12.5527 3.00876 12.0004 3.00854C11.4481 3.00833 11.0002 3.45587 11 4.00815L10.9968 12.0116C10.9966 12.5639 11.4442 13.0118 11.9965 13.012C12.5487 13.0122 12.9966 12.5647 12.9968 12.0124L13 4.00894Z",fill:"currentColor"}},{tag:"path",attr:{d:"M4 12.9917C4 10.7826 4.89541 8.7826 6.34308 7.33488L7.7573 8.7491C6.67155 9.83488 6 11.3349 6 12.9917C6 16.3054 8.68629 18.9917 12 18.9917C15.3137 18.9917 18 16.3054 18 12.9917C18 11.3348 17.3284 9.83482 16.2426 8.74903L17.6568 7.33481C19.1046 8.78253 20 10.7825 20 12.9917C20 17.41 16.4183 20.9917 12 20.9917C7.58172 20.9917 4 17.41 4 12.9917Z",fill:"currentColor"}}]})(e)}const z=()=>{const[e,t,r]=x(),n=a();return l.createElement(i,{backgroundColor:"white",boxShadow:"md"},l.createElement(c,{maxWidth:"6xl"},l.createElement(s,{alignItems:"center",as:"nav",direction:"row",justifyContent:"space-between",paddingY:3},l.createElement(d,{height:8,width:8,src:"/assets/logo.0e006306.svg"}),l.createElement(s,{alignItems:"center",color:"gray.500",direction:"row",spacing:3},l.createElement(u,{as:I,w:6,h:6}),l.createElement(g,{fontWeight:"500"},null==e?void 0:e.name),l.createElement(s,{alignItems:"center",backgroundColor:"gray.100",borderRadius:9999,cursor:"pointer",paddingX:3,paddingY:2,direciton:"row",onClick:()=>{n("/"),r()}},l.createElement(u,{as:W}))))))},M=({children:e})=>l.createElement(m,{backgroundColor:"gray.100",flex:1,direction:"column"},l.createElement(z,null),l.createElement(p,{paddingY:6},l.createElement(c,{maxWidth:"6xl"},e)));var B=async()=>await S.get("/blogs");function D(e){return R({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#D50000",d:"M24,6C14.1,6,6,14.1,6,24s8.1,18,18,18s18-8.1,18-18S33.9,6,24,6z M24,10c3.1,0,6,1.1,8.4,2.8L12.8,32.4 C11.1,30,10,27.1,10,24C10,16.3,16.3,10,24,10z M24,38c-3.1,0-6-1.1-8.4-2.8l19.6-19.6C36.9,18,38,20.9,38,24C38,31.7,31.7,38,24,38 z"}}]})(e)}function Y(e){let t;const r=new Set,n=(e,n)=>{const o="function"==typeof e?e(t):e;if(o!==t){const e=t;t=n?o:Object.assign({},t,o),r.forEach((r=>r(t,e)))}},o=()=>t,a={setState:n,getState:o,subscribe:(e,n,a)=>n||a?((e,n=o,a=Object.is)=>{let l=n(t);function i(){const r=n(t);if(!a(l,r)){const t=l;e(l=r,t)}}return r.add(i),()=>r.delete(i)})(e,n,a):(r.add(e),()=>r.delete(e)),destroy:()=>r.clear()};return t=e(n,o,a),a}const X="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?f.exports.useEffect:f.exports.useLayoutEffect;const F=function(e){const t="function"==typeof e?Y(e):e,r=(e=t.getState,r=Object.is)=>{const[,n]=f.exports.useReducer((e=>e+1),0),o=t.getState(),a=f.exports.useRef(o),l=f.exports.useRef(e),i=f.exports.useRef(r),c=f.exports.useRef(!1),s=f.exports.useRef();let d;void 0===s.current&&(s.current=e(o));let u=!1;(a.current!==o||l.current!==e||i.current!==r||c.current)&&(d=e(o),u=!r(s.current,d)),X((()=>{u&&(s.current=d),a.current=o,l.current=e,i.current=r,c.current=!1}));const g=f.exports.useRef(o);return X((()=>{const e=()=>{try{const e=t.getState(),r=l.current(e);i.current(s.current,r)||(a.current=e,s.current=r,n())}catch(e){c.current=!0,n()}},r=t.subscribe(e);return t.getState()!==g.current&&e(),r}),[]),u?d:s.current};return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[r,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},r}((e=>({blogs:[],list:t=>e((e=>({blogs:t}))),addBlog:t=>e((e=>({blogs:[...e.blogs,t]}))),removeBlog:t=>e((e=>({blogs:e.blogs.filter((e=>e.id!==t))}))),likeBlog:t=>e((e=>({blogs:e.blogs.filter((e=>e.id!=e.id)).concat(t)})))}))),P=e=>{var a,c=e,{blog:u,isSelected:f,showDetails:E}=c,w=((e,o)=>{var a={};for(var l in e)r.call(e,l)&&o.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&t)for(var l of t(e))o.indexOf(l)<0&&n.call(e,l)&&(a[l]=e[l]);return a})(c,["blog","isSelected","showDetails"]);const C=u.user.username===(null==(a=j.getToken())?void 0:a.username),{removeBlog:v}=F();return l.createElement(i,((e,a)=>{for(var l in a||(a={}))r.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))n.call(a,l)&&o(e,l,a[l]);return e})({backgroundColor:"white",borderRadius:"sm",boxShadow:"md",cursor:"pointer",opacity:C?1:.5,padding:6,position:"relative"},w),l.createElement(s,{spacing:3},l.createElement(s,{alignItems:"center",backgroundColor:"white",borderColor:C?"primary.500":"orange.500",borderRadius:9999,borderWidth:1,color:C?"primary.500":"orange.500",direction:"row",fontSize:"sm",fontWeight:"500",justifyContent:"center",paddingX:3,paddingY:1,position:"absolute",right:6,spacing:2,top:6},l.createElement(g,null,u.likes),l.createElement(d,{height:4,src:"/assets/like.9d39e46e.svg",width:4})),l.createElement(p,{onClick:E},l.createElement(d,{objectFit:"contain",src:"http://www.cuevadelobo.com/wp-content/uploads/2017/03/Blog-intro.jpg",width:64})),C&&l.createElement(s,{alignItems:"center",backgroundColor:"white",borderRadius:9999,borderWidth:1,direction:"row",fontSize:"sm",fontWeight:"500",justifyContent:"center",paddingX:.5,paddingY:.5,position:"absolute",right:5,spacing:1,bottom:20},l.createElement(b,{"aria-label":"Delete blog",icon:l.createElement(D,null),w:5,h:5,onClick:()=>v(u.id)})),l.createElement(h,null),l.createElement(s,{alignItems:"flex-start",spacing:0},l.createElement(g,{color:"gray.500",fontSize:"sm"},u.author),l.createElement(g,{fontWeight:"500"},u.title))),f&&l.createElement(m,{alignItems:"center",borderRadius:"sm",height:"100%",justifyContent:"center",left:0,position:"absolute",top:0,width:"100%",zIndex:2,onClick:E},l.createElement(i,{backgroundColor:"primary.500",borderRadius:"sm",height:"100%",left:0,opacity:.9,position:"absolute",top:0,width:"100%"}),l.createElement(p,{maxWidth:"50%"},l.createElement(s,{color:"white",fontSize:"2xl",fontWeight:"bold",spacing:6,zIndex:3},l.createElement(g,null,u.url," by ",u.author)))))},A=({blogs:e})=>{const[t,r]=l.useState(null);return l.createElement(E,{gap:6,templateColumns:"repeat(auto-fill, minmax(256px, 1fr))",width:"100%"},e.map((e=>l.createElement(P,{key:e.id,isSelected:t===e.id,blog:e,showDetails:()=>{t===e.id?r(null):r(e.id)}}))))},G=({current:e,total:t})=>l.createElement(g,{color:"gray.500",fontWeight:"bold"},e," of ",t," blogs");var H,T;(T=H||(H={})).MostLiked="Most liked",T.LeastLiked="Least liked";const Z=[H.MostLiked,H.LeastLiked],q=({active:e,onChange:t})=>l.createElement(s,{alignItems:"center",direction:"row",spacing:6},l.createElement(g,{color:"gray.500"},"Sort by"),l.createElement(s,{direction:"row",spacing:4},Z.map((r=>l.createElement(i,{key:r,backgroundColor:r===e?"primary.400":"gray.100",borderRadius:9999,color:r===e?"white":"gray.600",cursor:"pointer",fontWeight:"500",paddingX:6,paddingY:2,onClick:()=>t(r)},r))))),J=({blogs:e})=>{const[t,r]=l.useState(H.MostLiked),n=l.useMemo((()=>{switch(t){case H.MostLiked:return[...e].sort(((e,t)=>t.likes-e.likes));case H.LeastLiked:return[...e].sort(((e,t)=>e.likes-t.likes));default:return e}}),[t,e]);return l.createElement(s,{alignItems:"flex-start",spacing:6},l.createElement(s,{alignItems:"center",as:"nav",direction:"row",divider:l.createElement(h,{borderColor:"gray.300",height:12,orientation:"vertical"}),flex:1,spacing:6,width:"100%"},l.createElement(G,{current:e.length,total:e.length}),l.createElement(q,{active:t,onChange:r})),l.createElement(A,{blogs:n}),l.createElement(G,{current:n.length,total:n.length}))},K=()=>{const{blogs:e,list:t}=F(),[r,n]=l.useState("pending");return l.useEffect((()=>{B().then((e=>{t(e),n("resolved")}))}),[]),"pending"===r?l.createElement(L,null):l.createElement(s,{flex:1,spacing:6},l.createElement(m,{alignItems:"flex-start",backgroundImage:"url(/assets/header.0ccef89e.png)",backgroundSize:"cover",borderRadius:"md",justifyContent:"flex-start",minHeight:64,padding:6},l.createElement(w,{color:"white",fontSize:"4xl"},"Blogs App")),l.createElement(J,{blogs:e}))},N=()=>l.createElement(M,null,l.createElement(k,null),l.createElement(K,null)),Q=()=>l.createElement(C,null,l.createElement(v,{path:"/app",element:l.createElement(N,null)}),l.createElement(v,{path:"/",element:l.createElement(O,null)}),l.createElement(v,{path:"*",element:l.createElement(y,{to:"/"})}));export{Q as ProtectedRoutes};
