import{e,t,r,R as n,F as o,C as s,a,b as l,c,w as i,d as u,f as d}from"./vendor.8adc1e17.js";var m=e({colors:{primary:t.colors.orange}});let p;const E={},g=function(e,t){if(!t||0===t.length)return e();if(void 0===p){const e=document.createElement("link").relList;p=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if((e=`/${e}`)in E)return;E[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":p,t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e()))};function f(e,t){return Object.create({[t]:r.exports.lazy((()=>e().then((e=>({default:e[t]})))))})}const h=()=>n.createElement(o,{flexDirection:"column",width:"100wh",height:"100vh",backgroundColor:"gray.100",justifyContent:"center",alignItems:"center"},n.createElement(s,null,n.createElement(a,{isIndeterminate:!0,color:"primary.500"}))),v={getToken:()=>{const e=window.localStorage.getItem("blogapp_react_token");if(e)return JSON.parse(e)},setToken:e=>{window.localStorage.setItem("blogapp_react_token",JSON.stringify(e))},clearToken:()=>{window.localStorage.removeItem("blogapp_react_token")}},_=l.create({baseURL:"/api"});_.interceptors.request.use((e=>{const t=v.getToken();return t&&(e.headers.authorization=`bearer ${t}`),e.headers.Accept="application/json",e})),_.interceptors.response.use((e=>e.data),(e=>{var t,r;const n=(null==(r=null==(t=e.response)?void 0:t.data)?void 0:r.message)||e.message;return c()({title:"Error",description:n,status:"error",duration:5e3,isClosable:!0}),Promise.reject(e)}));const k=async e=>await _.post("/login",e);var b=async()=>{const e=v.getToken();if(e)return e};const y=n.createContext({}),P=({children:e})=>{const[t,r]=n.useState(),[o,s]=n.useState("pending");if(n.useEffect((()=>{b().then((e=>{r(e),s("resolved")}))}),[]),"pending"===o)return n.createElement(h,null);const a={user:t},l={setUser:async e=>{const t=await k(e);return t&&(v.setToken(t),r(t),s("resolved")),t},clearUser:()=>{v.clearToken(),r(void 0)}};return n.createElement(y.Provider,{value:{state:a,actions:l}},e)},w=()=>{const{state:{user:e},actions:{setUser:t,clearUser:r}}=n.useContext(y);return[e,t,r]},{ProtectedRoutes:x}=f((()=>g((()=>import("./ProtectedRoutes.a8eefe55.js")),["assets/ProtectedRoutes.a8eefe55.js","assets/vendor.8adc1e17.js","assets/Landing.bfc0d460.js"])),"ProtectedRoutes"),{PublicRoutes:R}=f((()=>g((()=>import("./PublicRoutes.df2abc6e.js")),["assets/PublicRoutes.df2abc6e.js","assets/vendor.8adc1e17.js","assets/Landing.bfc0d460.js"])),"PublicRoutes"),S=()=>{const[e,t,r]=w();return e?n.createElement(x,null):n.createElement(R,null)},T=({children:e})=>r.exports.createElement(r.exports.Suspense,{fallback:r.exports.createElement(h,null)},r.exports.createElement(P,null,r.exports.createElement(i,null,e)));u.render(n.createElement(n.StrictMode,null,n.createElement(d,{theme:m},n.createElement(T,null,n.createElement(S,null)))),document.getElementById("root"));export{h as C,_ as a,v as s,w as u};
